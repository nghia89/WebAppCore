var BaseController=function(){function t(){$("body").on("click",".add-to-cart",function(t){t.preventDefault();var n=$(this).data("id");$.ajax({url:"/Cart/AddToCart",type:"post",data:{productId:n,quantity:1,color:0,size:0},success:function(t){structures.notify("The product was added to cart","success"),e()}})}),$("body").on("click",".remove-cart",function(t){t.preventDefault();var n=$(this).data("id");$.ajax({url:"/Cart/RemoveFromCart",type:"post",data:{productId:n},success:function(t){structures.notify("The product was removed","success"),e()}})})}function e(){$("#headerCart").load("/AjaxContent/HeaderCart")}this.initialize=function(){t()}},structures={configs:{pageSize:10,pageIndex:1},notify:function(t,e){$.notify(t,{clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,position:"...",elementPosition:"bottom left",globalPosition:"bottom left",style:"bootstrap",className:e,showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:2})},confirm:function(t,e){bootbox.confirm({message:t,buttons:{confirm:{label:"Confirm",className:"btn-success"},cancel:{label:"Cancel",className:"btn-danger"}},callback:function(t){t===!0&&e()}})},dateFormatJson:function(t){if(null==t||""==t)return"";var e=new Date(parseInt(t.substr(6))),n=e.getMonth()+1,o=e.getDate(),r=e.getFullYear(),a=e.getHours(),s=e.getMinutes();return n<10&&(n="0"+n),o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),o+"/"+n+"/"+r},dateTimeFormatJson:function(t){if(null==t||""==t)return"";var e=new Date(parseInt(t.substr(6))),n=e.getMonth()+1,o=e.getDate(),r=e.getFullYear(),a=e.getHours(),s=e.getMinutes(),i=e.getSeconds();return n<10&&(n="0"+n),o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),i<10&&(i="0"+i),o+"/"+n+"/"+r+" "+a+":"+s+":"+i},formatNumber:function(t,e){if(!isFinite(t))return t.toString();var n=t.toFixed(e).split(".");return n[0]=n[0].replace(/\d(?=(\d{3})+$)/g,"$&,"),n.join(".")},unflattern:function(t){for(var e={},n=[],o=0;o<t.length;o+=1){var r=t[o];r.children=[],e[r.id]=o,null!==r.parentId?t[e[r.parentId]].children.push(r):n.push(r)}return n}},CartController=function(){function t(){$("body").on("click",".btn-delete",function(t){t.preventDefault();var e=$(this).data("id");$.ajax({url:"/Cart/RemoveFromCart",type:"post",data:{productId:e},success:function(){structures.notify("Removing product is successful.","success"),a(),s()}})}),$("body").on("keyup",".txtQuantity",function(t){t.preventDefault();var e=$(this).data("id"),n=$(this).val();n>0?$.ajax({url:"/Cart/UpdateCart",type:"post",data:{productId:e,quantity:n},success:function(){structures.notify("Update quantity is successful","success"),a(),s()}}):structures.notify("Your quantity is invalid","error")}),$("body").on("change",".ddlColorId",function(t){t.preventDefault();var e=parseInt($(this).closest("tr").data("id")),n=$(this).val(),o=$(this).closest("tr").find(".txtQuantity").first().val(),r=$(this).closest("tr").find(".ddlSizeId").first().val();o>0?$.ajax({url:"/Cart/UpdateCart",type:"post",data:{productId:e,quantity:o,color:n,size:r},success:function(){structures.notify("Update quantity is successful","success"),a(),s()}}):structures.notify("Your quantity is invalid","error")}),$("body").on("change",".ddlSizeId",function(t){t.preventDefault();var e=parseInt($(this).closest("tr").data("id")),n=$(this).val(),o=parseInt($(this).closest("tr").find(".txtQuantity").first().val()),r=parseInt($(this).closest("tr").find(".ddlColorId").first().val());o>0?$.ajax({url:"/Cart/UpdateCart",type:"post",data:{productId:e,quantity:o,color:r,size:n},success:function(){structures.notify("Update quantity is successful","success"),a(),s()}}):structures.notify("Your quantity is invalid","error")}),$("#btnClearAll").on("click",function(t){t.preventDefault(),$.ajax({url:"/Cart/ClearCart",type:"post",success:function(){structures.notify("Clear cart is successful","success"),a(),s()}})})}function e(){return $.ajax({type:"GET",url:"/Cart/GetColors",dataType:"json",success:function(t){i.colors=t},error:function(){structures.notify("Has an error in progress","error")}})}function n(){return $.ajax({type:"GET",url:"/Cart/GetSizes",dataType:"json",success:function(t){i.sizes=t},error:function(){structures.notify("Has an error in progress","error")}})}function o(t){var e="<select class='form-control ddlColorId'><option value='0'></option>";return $.each(i.colors,function(n,o){e+=t===o.Id?'<option value="'+o.Id+'" selected="select">'+o.Name+"</option>":'<option value="'+o.Id+'">'+o.Name+"</option>"}),e+="</select>"}function r(t){var e="<select class='form-control ddlSizeId'> <option value='0'></option>";return $.each(i.sizes,function(n,o){e+=t===o.Id?'<option value="'+o.Id+'" selected="select">'+o.Name+"</option>":'<option value="'+o.Id+'">'+o.Name+"</option>"}),e+="</select>"}function a(){$("#headerCart").load("/AjaxContent/HeaderCart")}function s(){return $.ajax({url:"/Cart/GetCart",type:"GET",dataType:"json",success:function(t){var e=$("#template-cart").html(),n="",a=0;$.each(t,function(t,s){n+=Mustache.render(e,{ProductId:s.Product.Id,ProductName:s.Product.Name,Image:s.Product.Image,Price:structures.formatNumber(s.Price,0),Quantity:s.Quantity,Colors:o(null==s.Color?0:s.Color.Id),Sizes:r(null==s.Size?"":s.Size.Id),Amount:structures.formatNumber(s.Price*s.Quantity,0),Url:"/"+s.Product.SeoAlias+"-p."+s.Product.Id+".html"}),a+=s.Price*s.Quantity}),$("#lblTotalAmount").text(structures.formatNumber(a,0)),""!==n?$("#table-cart-content").html(n):$("#table-cart-content").html("You have no product in cart")}}),!1}var i={colors:[],sizes:[]};this.initialize=function(){$.when(e(),n()).then(function(){s()}),t()}},ContactController=function(){function t(){e()}function e(){var t={lat:parseFloat($("#hidLat").val()),lng:parseFloat($("#hidLng").val())},e=new google.maps.Map(document.getElementById("map"),{zoom:17,center:t}),n=$("#hidAddress").val(),o=new google.maps.InfoWindow({content:n}),r=new google.maps.Marker({position:t,map:e,title:$("#hidName").val()});o.open(e,r)}this.initialize=function(){t()}},ProductDetailController=function(){function t(){$("#btnAddToCart").on("click",function(t){t.preventDefault();var n=parseInt($(this).data("id")),o=parseInt($("#ddlColorId").val()),r=parseInt($("#ddlSizeId").val());$.ajax({url:"/Cart/AddToCart",type:"post",dataType:"json",data:{productId:n,quantity:parseInt($("#txtQuantity").val()),color:o,size:r},success:function(){structures.notify("Product was added successful","success"),e()}})})}function e(){$("#headerCart").load("/AjaxContent/HeaderCart")}this.initialize=function(){t()}};